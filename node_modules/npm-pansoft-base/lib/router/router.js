'use strict';

exports.__esModule = true;

var _vueRouter = require('vue-router');

var _vueRouter2 = _interopRequireDefault(_vueRouter);

var _page = require('@/router/page/');

var _page2 = _interopRequireDefault(_page);

var _views = require('@/router/views/');

var _views2 = _interopRequireDefault(_views);

var _avueRouter = require('./avue-router');

var _avueRouter2 = _interopRequireDefault(_avueRouter);

var _vue = require('vue');

var _vue2 = _interopRequireDefault(_vue);

var _store = require('../store');

var _store2 = _interopRequireDefault(_store);

var _lang = require('@/lang');

var _lang2 = _interopRequireDefault(_lang);

var _util = require('../utils/util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 全站路由配置
 *
 * meta参数说明
 * keepAlive是否缓冲页面
 * isTab是否加入到tag导航
 * isAuth是否需要授权
 */
var Router = new _vueRouter2.default({
    scrollBehavior: function scrollBehavior(to, from, savedPosition) {
        if (savedPosition) {
            return savedPosition;
        } else {
            if (from.meta.keepAlive) {
                from.meta.savedPosition = document.body.scrollTop;
            }
            return {
                x: 0,
                y: to.meta.savedPosition || 0
            };
        }
    },

    routes: [],
    mode: "hash"
}); // Internationalization

_avueRouter2.default.install(_vue2.default, Router, _store2.default, _lang2.default);
Router.$avueRouter.formatRoutes(_store2.default.state.user.menu, true);
if (!(0, _util.isEmpty)(_page2.default) && !(0, _util.isEmpty)(_views2.default)) {
    Router.addRoutes([].concat(_page2.default, _views2.default));
} else if (!(0, _util.isEmpty)(_page2.default)) {
    Router.addRoutes([].concat(_page2.default));
} else if (!(0, _util.isEmpty)(_views2.default)) {
    Router.addRoutes([].concat(_views2.default));
}
_vue2.default.use(_vueRouter2.default);
exports.default = Router;